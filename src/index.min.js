"use strict";var Config=function(){function t(t){this.elem=t}return t.prototype.setData=function(t){t&&(this.ring=!1,this.width=t.width||"100%",this.height=t.height||"100%",this.img=this.setImg(t.img)||this.setImg("default"))},t.prototype.setImg=function(t){switch(t){case"circle_white":return"../assets/img/rgb_circle_white_1000_1000.png";case"ring_full":return this.ring=!0,"../assets/img/rgb_ring_full_1000_1000.png";case"ring_transparent":return this.ring=!0,"../assets/img/rgb_ring_transparent_1000_1000.png";case"circle_full":default:return"../assets/img/rgb_circle_full_1000_1000.png"}},t}(),CoreColorPicker=function(){function t(t,n){this.config=new Config(t),this.config.setData(n),this.init(),this._resize()}return t.prototype.init=function(){var t=this;this._createParent(this.config.elem),this._createCursor(),this._setCursor(this.canvas.width/2-(this.canvas.width<300?6:10),this.canvas.height/2-(this.canvas.width<300?6:10)),this.context=this.canvas.getContext("2d"),this.image=new Image,this.image.onload=function(){t.context.drawImage(t.image,0,0,t.canvas.width,t.canvas.height)},this.image.src=this.config.img,this.canvas.onclick=function(n){t._func(n).then(function(){t._start("colorClick")},function(){})},this.canvas.onmousedown=function(){t.canvas.onmousemove=function(n){t._func(n).then(function(){t._start("colorMove")},function(){})},document.onmouseup=function(){document.onmouseup=t.canvas.onmousemove=null}},this.cursor.onmousedown=function(){t.canvas.onmousemove=function(n){t._func(n).then(function(){t._start("colorMove")},function(){})},document.onmouseup=function(){document.onmouseup=t.canvas.onmousemove=null}}},t.prototype.colorClick=function(t){this.canvas.addEventListener("colorClick",t,!1)},t.prototype.colorMove=function(t){this.canvas.addEventListener("colorMove",t,!1)},t.prototype._createParent=function(t){var n=document.getElementById(t);this.parentCanvas?n.removeChild(this.parentCanvas):null,this.parentCanvas=document.createElement("div"),this.parentCanvas.style.width=this.config.width,this.parentCanvas.style.height=this.config.height,n.appendChild(this.parentCanvas),this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.parentCanvas.offsetWidth,this.parentCanvas.appendChild(this.canvas)},t.prototype._createCursor=function(){this.cursor=document.createElement("div"),this.cursor.style.position="absolute",this.cursor.style.width=(this.canvas.width<300?8:14)+"px",this.cursor.style.height=(this.canvas.width<300?8:14)+"px",this.cursor.style.backgroundColor="transparent",this.cursor.style.borderRadius="50%",this.cursor.style.border=(this.canvas.width<300?2:4)+"px solid white",this.parentCanvas.insertBefore(this.cursor,this.canvas)},t.prototype._func=function(t){var n=this,i=this.canvas.width/2;return new Promise(function(s,e){if(Math.pow(i-t.offsetX,2)+Math.pow(i-t.offsetY,2)>=Math.pow(i,2))e(!0);else{var o=n.config.ring?n._ring(t):[t.offsetX,t.offsetY],a=n.context.getImageData(o[0],o[1],1,1).data;n.colorRgb=[a[0],a[1],a[2]],n.colorHex="#"+n.toHex(a[0],a[1],a[2]),n._setCursor(o[0]-(n.canvas.width<300?6:10),o[1]-(n.canvas.width<300?6:10)),s(!0)}})},t.prototype._ring=function(t){var n=this.canvas.width/2,i=[this.canvas.width-this.canvas.width/2,0],s=[t.offsetX-this.canvas.width/2,t.offsetY-this.canvas.height/2],e=(i[0]*s[0]+i[1]*s[1])/(Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))*Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2))),o=.88*n*e+n,a=Math.sqrt(Math.pow(.88*n,2)-Math.pow(o-this.canvas.width/2,2))*(t.offsetY>this.canvas.height/2?1:-1)+this.canvas.height/2;return[o,a]},t.prototype._setCursor=function(t,n){this.cursorX=t,this.cursorY=n,this.cursor.style.marginTop=n+"px",this.cursor.style.marginLeft=t+"px"},t.prototype._start=function(t){var n=new CustomEvent(t,{detail:{colorRbg:this.colorRgb,colorHex:this.colorHex}});this.canvas.dispatchEvent(n)},t.prototype._resize=function(){var t=this;this.config.width.indexOf("%")!=-1&&(window.onresize=function(){t.init()})},t.prototype.toHex=function(t,n,i){return t=t.toString(16),n=n.toString(16),i=i.toString(16),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),(t+n+i).toUpperCase()},t}();exports.CoreColorPicker=CoreColorPicker;var Config=function(){function t(t){this.elem=t}return t.prototype.setData=function(t){t&&(this.ring=!1,this.width=t.width||"100%",this.height=t.height||"100%",this.img=this.setImg(t.img)||this.setImg("default"))},t.prototype.setImg=function(t){switch(t){case"circle_white":return"../assets/img/rgb_circle_white_1000_1000.png";case"ring_full":return this.ring=!0,"../assets/img/rgb_ring_full_1000_1000.png";case"ring_transparent":return this.ring=!0,"../assets/img/rgb_ring_transparent_1000_1000.png";case"circle_full":default:return"../assets/img/rgb_circle_full_1000_1000.png"}},t}(),CoreColorPicker=function(){function t(t,n){this.config=new Config(t),this.config.setData(n),this.init(),this._resize()}return t.prototype.init=function(){var t=this;this._createParent(this.config.elem),this._createCursor(),this._setCursor(this.canvas.width/2-(this.canvas.width<300?6:10),this.canvas.height/2-(this.canvas.width<300?6:10)),this.context=this.canvas.getContext("2d"),this.image=new Image,this.image.onload=function(){t.context.drawImage(t.image,0,0,t.canvas.width,t.canvas.height)},this.image.src=this.config.img,this.canvas.onclick=function(n){t._func(n).then(function(){t._start("colorClick")},function(){})},this.canvas.onmousedown=function(){t.canvas.onmousemove=function(n){t._func(n).then(function(){t._start("colorMove")},function(){})},document.onmouseup=function(){document.onmouseup=t.canvas.onmousemove=null}},this.cursor.onmousedown=function(){t.canvas.onmousemove=function(n){t._func(n).then(function(){t._start("colorMove")},function(){})},document.onmouseup=function(){document.onmouseup=t.canvas.onmousemove=null}}},t.prototype.colorClick=function(t){this.canvas.addEventListener("colorClick",t,!1)},t.prototype.colorMove=function(t){this.canvas.addEventListener("colorMove",t,!1)},t.prototype._createParent=function(t){var n=document.getElementById(t);this.parentCanvas?n.removeChild(this.parentCanvas):null,this.parentCanvas=document.createElement("div"),this.parentCanvas.style.width=this.config.width,this.parentCanvas.style.height=this.config.height,n.appendChild(this.parentCanvas),this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.parentCanvas.offsetWidth,this.parentCanvas.appendChild(this.canvas)},t.prototype._createCursor=function(){this.cursor=document.createElement("div"),this.cursor.style.position="absolute",this.cursor.style.width=(this.canvas.width<300?8:14)+"px",this.cursor.style.height=(this.canvas.width<300?8:14)+"px",this.cursor.style.backgroundColor="transparent",this.cursor.style.borderRadius="50%",this.cursor.style.border=(this.canvas.width<300?2:4)+"px solid white",this.parentCanvas.insertBefore(this.cursor,this.canvas)},t.prototype._func=function(t){var n=this,i=this.canvas.width/2;return new Promise(function(s,e){if(Math.pow(i-t.offsetX,2)+Math.pow(i-t.offsetY,2)>=Math.pow(i,2))e(!0);else{var o=n.config.ring?n._ring(t):[t.offsetX,t.offsetY],a=n.context.getImageData(o[0],o[1],1,1).data;n.colorRgb=[a[0],a[1],a[2]],n.colorHex="#"+n.toHex(a[0],a[1],a[2]),n._setCursor(o[0]-(n.canvas.width<300?6:10),o[1]-(n.canvas.width<300?6:10)),s(!0)}})},t.prototype._ring=function(t){var n=this.canvas.width/2,i=[this.canvas.width-this.canvas.width/2,0],s=[t.offsetX-this.canvas.width/2,t.offsetY-this.canvas.height/2],e=(i[0]*s[0]+i[1]*s[1])/(Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))*Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2))),o=.88*n*e+n,a=Math.sqrt(Math.pow(.88*n,2)-Math.pow(o-this.canvas.width/2,2))*(t.offsetY>this.canvas.height/2?1:-1)+this.canvas.height/2;return[o,a]},t.prototype._setCursor=function(t,n){this.cursorX=t,this.cursorY=n,this.cursor.style.marginTop=n+"px",this.cursor.style.marginLeft=t+"px"},t.prototype._start=function(t){var n=new CustomEvent(t,{detail:{colorRbg:this.colorRgb,colorHex:this.colorHex}});this.canvas.dispatchEvent(n)},t.prototype._resize=function(){var t=this;this.config.width.indexOf("%")!=-1&&(window.onresize=function(){t.init()})},t.prototype.toHex=function(t,n,i){return t=t.toString(16),n=n.toString(16),i=i.toString(16),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),(t+n+i).toUpperCase()},t}();exports.CoreColorPicker=CoreColorPicker;